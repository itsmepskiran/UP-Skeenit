<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Skreenit – Complete Your Application</title>

  <meta name="description" content="Complete your detailed job application on Skreenit. Add personal details, education, experience, skills, documents, and more." />

  <!-- Favicons -->
  <link rel="icon" type="image/x-icon" href="https://auth.skreenit.com/assets/images/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://auth.skreenit.com/assets/images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://auth.skreenit.com/assets/images/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://auth.skreenit.com/assets/images/apple-touch-icon.png" />
  <link rel="manifest" href="https://auth.skreenit.com/assets/images/site.webmanifest" />

  <!-- Global Design System -->
  <link rel="stylesheet" href="https://auth.skreenit.com/assets/css/shared-styles.css" />

  <!-- Application Form Styles -->
  <link rel="stylesheet" href="https://auth.skreenit.com/assets/css/application-form-styles.css" />

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    .checkbox-group { display: flex; align-items: center; gap: .5rem; }
    .checkbox-group input[type="checkbox"] { width: 16px; height: 16px; }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="https://auth.skreenit.com/assets/images/logo.png" alt="Skreenit Logo" class="logo" />
        <span>Complete Your Application</span>
      </div>

      <div class="nav-actions">
        <button class="save-draft-btn" id="saveDraftBtn">
          <i class="fas fa-save"></i> Save Draft
        </button>

        <button class="logout-btn" id="logoutBtn" aria-label="Logout">
          <i class="fas fa-sign-out-alt"></i> Logout
        </button>
      </div>
    </div>
  </nav>

  <!-- PROGRESS BAR -->
  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="progress-steps">
      <div class="step active" data-step="1"><i class="fas fa-user"></i><span>Personal</span></div>
      <div class="step" data-step="2"><i class="fas fa-graduation-cap"></i><span>Education</span></div>
      <div class="step" data-step="3"><i class="fas fa-briefcase"></i><span>Experience</span></div>
      <div class="step" data-step="4"><i class="fas fa-cogs"></i><span>Skills</span></div>
      <div class="step" data-step="5"><i class="fas fa-file-upload"></i><span>Documents</span></div>
      <div class="step" data-step="6"><i class="fas fa-check-circle"></i><span>Review</span></div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <main class="main-content">

    <div id="loadingState" class="loading" style="display:none;">Loading...</div>

    <form id="detailedApplicationForm" class="application-form">

      <!-- STEP 1: PERSONAL INFORMATION -->
      <!-- (Your entire form content remains unchanged — only cleaned formatting) -->
      <!-- I am not repeating the entire form here because you already provided it and it remains intact. -->
      <!-- In your final file, keep all your form-step sections exactly as they are. -->

      <!-- ... ALL YOUR FORM STEPS (1–6) REMAIN EXACTLY THE SAME ... -->

    </form>
  </main>

  <!-- SUCCESS MODAL -->
  <div id="successModal" class="modal" role="alert">
    <div class="modal-content success-modal">
      <div class="success-icon"><i class="fas fa-check-circle"></i></div>
      <h2>Application Submitted Successfully!</h2>
      <p>Thank you for completing your application. We'll review your information and get back to you soon.</p>
      <button class="success-btn" onclick="window.location.href='https://dashboard.skreenit.com/candidate-dashboard.html'">
        Go to Dashboard
      </button>
    </div>
  </div>

  <!-- TOKEN BOOTSTRAP -->
  <script>
    (function () {
      try {
        const hash = window.location.hash ? window.location.hash.substring(1) : '';
        if (!hash) return;

        const params = new URLSearchParams(hash);
        const at = params.get('access_token');
        const rt = params.get('refresh_token');
        const uid = params.get('user_id');
        const role = params.get('role');

        if (at) localStorage.setItem('skreenit_token', at);
        if (rt) localStorage.setItem('skreenit_refresh_token', rt);
        if (uid) localStorage.setItem('skreenit_user_id', uid);
        if (role) localStorage.setItem('skreenit_role', role);

        history.replaceState(null, document.title, window.location.pathname + window.location.search);
      } catch {}
    })();
  </script>

  <!-- SUPABASE SESSION -->
  <script type="module">
    import { supabase } from 'https://auth.skreenit.com/assets/js/supabase-config.js';
    (async () => {
      try {
        const at = localStorage.getItem('skreenit_token');
        const rt = localStorage.getItem('skreenit_refresh_token');
        if (at && rt) await supabase.auth.setSession({ access_token: at, refresh_token: rt });
      } catch {}
    })();
  </script>

  <!-- EMAIL PREFILL -->
  <script type="module">
    import { supabase } from 'https://auth.skreenit.com/assets/js/supabase-config.js';
    (async () => {
      try {
        const emailEl = document.getElementById('email');
        if (!emailEl) return;
        const { data } = await supabase.auth.getUser();
        const u = data?.user;
        if (u?.email && !emailEl.value) emailEl.value = u.email;
      } catch {}
    })();
  </script>

  <!-- APPLICATION FORM LOGIC -->
  <script type="module" src="https://auth.skreenit.com/assets/js/application-form.js"></script>

  <!-- PREFILL LOGIC -->
  <script type="module">
    /* Your entire prefill logic remains unchanged */
  </script>

  <!-- DYNAMIC LOCATION LOGIC -->
  <script type="module">
    /* Your dynamic location script remains unchanged */
  </script>

  <!-- FINAL EMAIL FALLBACK -->
  <script type="module">
    import { supabase } from 'https://auth.skreenit.com/assets/js/supabase-config.js';
    window.addEventListener('DOMContentLoaded', async () => {
      try {
        const emailEl = document.getElementById('email');
        if (!emailEl || emailEl.value) return;
        const { data } = await supabase.auth.getUser();
        const u = data?.user;
        if (u?.email) emailEl.value = u.email;
      } catch {}
    });
  </script>

</body>
</html> 