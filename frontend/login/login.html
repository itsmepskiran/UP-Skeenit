<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skreenit - Login</title>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://auth.skreenit.com/assets/images/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://auth.skreenit.com/assets/images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://auth.skreenit.com/assets/images/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://auth.skreenit.com/assets/images/apple-touch-icon.png" />
  <link rel="manifest" href="https://auth.skreenit.com/assets/images/site.webmanifest" />
  <link rel="preconnect" href="https://auth.skreenit.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://auth.skreenit.com/assets/css/shared-styles.css?v=1.0.0" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Enhanced form styles */
    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #333;
      text-align: left;
      width: 100%;
    }
    
    .input-group {
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;
    }
    
    .input-icon {
      position: absolute;
      left: 12px;
      font-size: 1.1rem;
      color: #666;
      pointer-events: none;
    }
    
    .form-control {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 40px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }
    
    .form-control:focus {
      border-color: #4f46e5;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
      outline: none;
    }
    
    .toggle-password {
      position: absolute;
      right: 12px;
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 4px;
    }
    
    .toggle-password:hover {
      background: #f5f5f5;
    }
    
    .role-selection {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }
    
    .role-option {
      flex: 1;
      padding: 1.25rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .role-option:hover {
      border-color: #c7d2fe;
      background: #f8fafc;
    }
    
    .role-option.active {
      border-color: #4f46e5;
      background: #eef2ff;
    }
    
    .role-icon {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    
    .role-option h3 {
      margin: 0.5rem 0 0.25rem;
      font-size: 1rem;
      color: #111827;
    }
    
    .form-hint {
      font-size: 0.8rem;
      color: #6b7280;
      margin: 0.25rem 0 0;
    }
    
    #recruiterBox {
      animation: fadeIn 0.3s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <!-- Floating decorative elements -->
  <div class="floating-elements">
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
  </div>

  <a href="https://www.skreenit.com" class="logo-link animate-glow">
    <img src="https://auth.skreenit.com/assets/images/logo.png" alt="Skreenit" class="animate-pulse" />
  </a>
  <div class="auth-wrapper animate-slideInScale">
    <img src="https://auth.skreenit.com/assets/images/logobrand.png" alt="Skreenit" class="brand-image" />
    <div class="auth-header">
      <h1>
        <i class="fas fa-sign-in-alt"></i>
        Welcome Back
      </h1>
      <p style="margin: 0.5rem 0 0; color: var(--text-light); font-size: 0.95rem;">Sign in to your Skreenit account</p>
    </div>
    <div class="auth-body">
      <form id="loginForm">
        <div id="formError" class="error-message"></div>
        
        <div class="form-group">
          <label class="form-label">I am a*</label>
          <div class="role-selection">
            <div class="role-option" data-role="candidate">
              <div class="role-icon">üéØ</div>
              <h3>Candidate</h3>
              <p class="form-hint">Looking for opportunities</p>
            </div>
            <div class="role-option" data-role="recruiter">
              <div class="role-icon">üè¢</div>
              <h3>Recruiter</h3>
              <p class="form-hint">Hiring talent</p>
            </div>
          </div>
        </div>
        
        <input type="hidden" id="role" name="role" required>
        
        <div class="form-group">
          <label for="email" class="form-label">Email Address*</label>
          <div class="input-group">
            <span class="input-icon">üìß</span>
            <input type="email" id="email" name="email" required 
                   class="form-control"
                   placeholder="Enter your email address" 
                   autocomplete="email" />
          </div>
        </div>
        
        <div class="form-group">
          <label for="password" class="form-label">Password*</label>
          <div class="input-group">
            <span class="input-icon">üîí</span>
            <input type="password" id="password" name="password" 
                   class="form-control"
                   required 
                   placeholder="Enter your password" />
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        
        <div id="recruiterBox" class="form-group" style="display:none;">
          <label for="company_id" class="form-label">Company ID*</label>
          <div class="input-group">
            <span class="input-icon">üè¢</span>
            <input type="text" id="company_id" 
                   name="company_id" 
                   class="form-control"
                   placeholder="Enter your company ID"
                   style="padding-left: 40px;" />
          </div>
          <div class="form-hint">Your unique company identifier provided during registration</div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" style="width: 100%;">
            <i class="fas fa-sign-in-alt"></i> Sign In
          </button>
          <div class="auth-links" style="text-align: center; margin-top: 1rem;">
            <a href="https://login.skreenit.com/forgot-password.html" class="forgot-password" style="color: #4f46e5; text-decoration: none;">Forgot Password?</a>
            <span class="divider" style="margin: 0 0.5rem; color: #9ca3af;">|</span>
            <a href="https://login.skreenit.com/registration.html" class="register-link" style="color: #4f46e5; text-decoration: none;">Create Account</a>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Main application scripts -->
  <script type="module" src="https://auth.skreenit.com/assets/js/supabase-config.js"></script>
  <script type="module" src="https://auth.skreenit.com/assets/js/backend-client.js"></script>
  <script type="module" src="https://auth.skreenit.com/assets/js/auth-pages.js"></script>
  <script type="module" src="https://auth.skreenit.com/assets/js/login.js"></script>
      const loginForm = document.getElementById('loginForm')
      const roleOptions = document.querySelectorAll('.role-option')
      const recruiterBox = document.getElementById('recruiterBox')
      const roleInput = document.getElementById('role')
      const companyIdInput = document.getElementById('company_id')
      const togglePassword = document.querySelector('.toggle-password')
      const passwordInput = document.getElementById('password')
      
      // Handle role selection
      roleOptions.forEach(option => {
        option.addEventListener('click', function() {
          // Remove active class from all options
          roleOptions.forEach(opt => opt.classList.remove('active'))
          
          // Add active class to clicked option
          this.classList.add('active')
          
          // Update hidden input value
          const role = this.getAttribute('data-role')
          roleInput.value = role
          
          // Show/hide company ID field based on role
          if (role === 'recruiter') {
            recruiterBox.style.display = 'block'
            companyIdInput.required = true
          } else {
            recruiterBox.style.display = 'none'
            companyIdInput.required = false
            companyIdInput.value = ''
          }
        })
      })
      
      // Form validation
      loginForm.addEventListener('submit', function(e) {
        if (!roleInput.value) {
          e.preventDefault()
          document.getElementById('formError').textContent = 'Please select a role (Candidate or Recruiter)'
          return false
        }
        
        // If recruiter is selected but no company ID provided
        if (roleInput.value === 'recruiter' && !companyIdInput.value.trim()) {
          e.preventDefault()
          document.getElementById('formError').textContent = 'Company ID is required for recruiters'
          return false
        }
        
        return handleLoginSubmit(e)
      })
      
      // Toggle password visibility
      if (togglePassword && passwordInput) {
        togglePassword.addEventListener('click', function() {
          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
          passwordInput.setAttribute('type', type);
          this.querySelector('i').classList.toggle('fa-eye');
          this.querySelector('i').classList.toggle('fa-eye-slash');
        });
      }
      
      // Toggle password visibility
      if (togglePasswordBtn) {
        togglePasswordBtn.addEventListener('click', function() {
          const type = passwordInput.type === 'password' ? 'text' : 'password'
          passwordInput.type = type
          this.querySelector('i').classList.toggle('fa-eye-slash')
        })
      }
      
      // Toggle recruiter-specific fields
      function toggleRecruiter() {
        const isRecruiter = roleInput.value === 'recruiter'
        recruiterBox.style.display = isRecruiter ? 'block' : 'none'
        const companyIdInput = document.getElementById('company_id')
        if (companyIdInput) {
          companyIdInput.required = isRecruiter
        }
      }
      
      // Set initial state
      if (roleOptions.length > 0) {
        roleOptions[0].click() // Default to first option
      }
      
      // Handle form submission
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault()
        
        // Validate role is selected
        if (!roleInput.value) {
          showError('Please select a role (Candidate or Recruiter)')
          return
        }
        
        // Continue with form submission
        handleLoginSubmit(e)
      })
      
      function showError(message) {
        const errorDiv = document.getElementById('formError')
        if (errorDiv) {
          errorDiv.textContent = message
          errorDiv.style.display = 'block'
        }
      }
    })
    // First-time login check and role-based redirect
    const loginForm = document.getElementById('loginForm')
    loginForm.addEventListener('submit', async function(e) {
      e.preventDefault()
      const role = document.getElementById('role').value
      const email = document.getElementById('email').value
      const password = document.getElementById('password').value
      // Simulate first-time check (replace with backend call)
      const isFirstTime = localStorage.getItem('first_login') === 'true'
      if (isFirstTime) {
        document.getElementById('firstTimePopup').style.display = 'flex'
        return
      }
      // Post-login redirect based on role
      if (role === 'recruiter') {
        window.location.href = 'https://recruiter.skreenit.com/recruiter-profile.html'
      } else if (role === 'candidate') {
        window.location.href = 'https://applicant.skreenit.com/detailed-application-form.html'
      }
    })
  </script>
</body>
</html>