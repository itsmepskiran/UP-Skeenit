# This configuration is for a project with a Python backend and multiple static frontend sites.

[build]
  # The command to build the backend function.
  # It installs dependencies from the backend's requirements.txt file.
  command = "python -m pip install --upgrade pip && pip install -r backend/requirements.txt"
  
  # The directory containing the serverless functions.
  functions = "backend/netlify/functions"
  
  # The directory to publish, which is the root of the project.
  # This makes all static HTML/CSS/JS folders (login, applicant, etc.) available.
  publish = "."

[build.environment]
  # Specify the Python version for the build environment.
  PYTHON_VERSION = "3.11"

[functions]
  # Ensure all necessary backend files are included in the function deployment.
  included_files = ["backend/**/*.py"]

# This redirect makes the Python backend function accessible at the root.
# For example, a request to /health will be routed to your function.
[[redirects]]
  from = "/*"
  to = "/.netlify/functions/main"
  status = 200
